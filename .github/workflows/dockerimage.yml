name: Docker Image CI

on: [push]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: Build the Docker image
      run: docker build --build-arg D2L_VER=$(date +%Y%m%d-%H%M%S) -t d2l .
    - name: Build html
      run: docker run -i -v `pwd`:/d2l d2l
  job2:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Set up Git repository
        uses: actions/checkout@v1
      - name: Compile LaTeX document
        uses: xu-cheng/latex-action@master
        with:
          root_file: _build/pdf/d2l-en.tex
